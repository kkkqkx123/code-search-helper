我已经完成了对 `src/service/parser/core/normalization` 目录中关系提取机制的全面分析，并生成了详细的分析文档和图表。

## 关于您的问题：当前具体提取过程是否依赖硬编码？

基于我的分析，当前的关系提取系统采用了**混合模式**，既有硬编码的部分，也有按类别提取的抽象设计：

### 1. 硬编码部分
- **Tree-sitter查询模式**: 如 [`lifecycle.ts`](src/service/parser/constants/queries/cpp/relationships/lifecycle.ts:1) 中包含大量硬编码的查询模式，用于识别特定的AST结构
- **文本匹配**: 在 [`LifecycleRelationshipExtractor.ts`](src/service/parser/core/normalization/adapters/cpp-utils/LifecycleRelationshipExtractor.ts:19) 中使用 `text.includes('new ')` 等硬编码匹配
- **语言特定逻辑**: 每种语言的Helper Methods都包含硬编码的语言特性处理

### 2. 按类别提取的抽象设计
- **关系类型分类**: [`RelationshipTypes.ts`](src/service/parser/core/normalization/types/RelationshipTypes.ts:9) 定义了11个主要关系类别
- **抽象基类**: [`BaseRelationshipExtractor`](src/service/parser/core/normalization/base/BaseRelationshipExtractor.ts:45) 提供统一的提取接口
- **管理器模式**: [`RelationshipExtractorManager`](src/service/parser/core/normalization/base/RelationshipExtractorManager.ts:68) 按类别管理和调度提取器

### 3. 实际工作模式
系统采用**分层抽象**的方式：
- **上层**: 按关系类别组织（数据流、控制流、语义等）
- **中层**: 语言适配器提供语言特定的抽象
- **底层**: 具体的硬编码实现和Tree-sitter查询

## 生成文档

我已生成了两个完整的分析文档：

1. **关系提取机制分析文档**: [`docs/parser/core/relationship-extraction-analysis.md`](docs/parser/core/relationship-extraction-analysis.md:1)
   - 456行详细分析
   - 涵盖架构设计、核心组件、实现模式、性能优化等

2. **关系提取流程图和架构图**: [`docs/parser/core/relationship-extraction-diagrams.md`](docs/parser/core/relationship-extraction-diagrams.md:1)
   - 334行图表和流程图
   - 包含12个不同角度的架构图和流程图

## 关键发现

1. **高度模块化**: 采用分层架构和多种设计模式
2. **可扩展性强**: 支持新关系类型和新语言的插件化扩展
3. **性能优化**: 多级缓存、并行处理、性能监控
4. **混合实现**: 抽象设计与具体硬编码相结合
5. **类型安全**: 完整的TypeScript类型系统

这种设计在保持灵活性的同时，也确保了性能和可维护性，是一个平衡良好的架构设计。