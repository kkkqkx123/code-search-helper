# Environment Configuration
NODE_ENV = development
PORT = 3010

# Database Configuration
# Qdrant Configuration
QDRANT_HOST = 127.0.0.1
QDRANT_PORT = 6333
# QDRANT_COLLECTION = code-snippets

# NebulaGraph Configuration
NEBULA_ENABLED = false
NEBULA_HOST = 127.0.0.1
NEBULA_PORT = 9669
NEBULA_USERNAME = root
NEBULA_PASSWORD = nebula
# NEBULA_SPACE = test_space
NEBULA_TIMEOUT = 3000
NEBULA_MAX_CONNECTIONS = 10
NEBULA_RETRY_ATTEMPTS = 3
NEBULA_RETRY_DELAY = 30000
NEBULA_BUFFER_SIZE = 2000
NEBULA_PING_INTERVAL = 3000
NEBULA_VID_TYPE_LENGTH = 128

# Embedding Configuration
EMBEDDING_PROVIDER = siliconflow
# 可选：
#  - openai
#  - ollama
#  - gemini
#  - mistral
#  - siliconflow (默认)
#  - custom1
#  - custom2
#  - custom3

# Skip unavailable provider checks to reduce unnecessary network requests
# Set to 'true' to skip checks for providers that are known to be unavailable
SKIP_UNAVAILABLE_PROVIDER_CHECKS = true

# Embedding Provider Enable/Disable (Set to 'false' to disable a provider)
OPENAI_ENABLED = false
OLLAMA_ENABLED = false
GEMINI_ENABLED = false
MISTRAL_ENABLED = false
SILICONFLOW_ENABLED = true
CUSTOM1_ENABLED = false
CUSTOM2_ENABLED = false
CUSTOM3_ENABLED = false

# Project Management Configuration
PROJECT_ALLOW_REINDEX = true

OPENAI_BASE_URL = https://api.openai.com
OPENAI_API_KEY = your-openai-api-key-here
OPENAI_MODEL = text-embedding-ada-002
OPENAI_DIMENSIONS = 1536

# Alternative embedding providers
OLLAMA_BASE_URL = http://localhost:11434
OLLAMA_MODEL = nomic-embed-text:latest
OLLAMA_DIMENSIONS = 768

GEMINI_API_KEY = your-gemini-api-key-here
GEMINI_BASE_URL = https://generativelanguage.googleapis.com
GEMINI_MODEL = embedding-001
GEMINI_DIMENSIONS = 768

MISTRAl_API_KEY = your-mistral-api-key-here
MISTRAL_BASE_URL = https://api.mistral.ai
MISTRAL_MODEL = mistral-embed
MISTRAL_DIMENSIONS = 1024

SILICONFLOW_API_KEY = your-siliconflow-api-key-here
SILICONFLOW_BASE_URL = https://api.siliconflow.cn/v1
SILICONFLOW_MODEL = BAAI/bge-m3
SILICONFLOW_DIMENSIONS = 1024

# Custom embedder configurations (set your URLs in .env file)
CUSTOM_CUSTOM1_API_KEY = your-custom1-api-key-here
CUSTOM_CUSTOM1_BASE_URL =
CUSTOM_CUSTOM1_MODEL = your-custom1-model-here
CUSTOM_CUSTOM1_DIMENSIONS = 768

CUSTOM_CUSTOM2_API_KEY = your-custom2-api-key-here
CUSTOM_CUSTOM2_BASE_URL =
CUSTOM_CUSTOM2_MODEL = your-custom2-model-here
CUSTOM_CUSTOM2_DIMENSIONS = 768

CUSTOM_CUSTOM3_API_KEY = your-custom3-api-key-here
CUSTOM_CUSTOM3_BASE_URL =
CUSTOM_CUSTOM3_MODEL = your-custom3-model-here
CUSTOM_CUSTOM3_DIMENSIONS = 768

# Embedding Batch Configuration
# Global embedding batch size limit (default: 50)
EMBEDDING_BATCH_SIZE = 50
# Provider-specific batch size limits
EMBEDDING_PROVIDER_OPENAI_BATCH_SIZE = 2048
EMBEDDING_PROVIDER_SILICONFLOW_BATCH_SIZE = 64
EMBEDDING_PROVIDER_OLLAMA_BATCH_SIZE = 128
EMBEDDING_PROVIDER_GEMINI_BATCH_SIZE = 100
EMBEDDING_PROVIDER_MISTRAL_BATCH_SIZE = 512
EMBEDDING_PROVIDER_CUSTOM1_BATCH_SIZE = 100
EMBEDDING_PROVIDER_CUSTOM2_BATCH_SIZE = 100
EMBEDDING_PROVIDER_CUSTOM3_BATCH_SIZE = 100

# Logging Configuration
LOG_LEVEL = debug
LOG_FORMAT = json

# Search Configuration
SEARCH_MOCK_MODE = false

# Monitoring Configuration
ENABLE_METRICS = true
METRICS_PORT = 9090
PROMETHEUS_TARGET_DIR = ./etc/prometheus

# File Processing Configuration
MAX_FILE_SIZE = 10485760
SUPPORTED_EXTENSIONS = .ts,.js,.py,.java,.go,.rs,.cpp,.c,.h
INDEX_BATCH_SIZE = 100
CHUNK_SIZE = 1000
OVERLAP_SIZE = 200

# Memory Configuration
MEMORY_MONITORING_ENABLED = false
MEMORY_THRESHOLD = 0.80
BATCH_MEMORY_THRESHOLD = 0.80
MAX_MEMORY_MB = 2048
MEMORY_WARNING_THRESHOLD = 0.90
MEMORY_CRITICAL_THRESHOLD = 0.94
MEMORY_EMERGENCY_THRESHOLD = 0.98
NODE_OPTIONS = "--max-old-space-size=2048"

# Static Analysis Configuration
SEMGREP_ENABLED = true
SEMGREP_CLI_PATH = semgrep
SEMGREP_RULES_DIR = ./config/semgrep-rules
SEMGREP_TIMEOUT = 300
SEMGREP_MAX_TARGET_BYTES = 1000000
SEMGREP_MAX_CONCURRENT_SCANS = 5
SEMGREP_CACHE_ENABLED = true
SEMGREP_CACHE_TTL = 3600
SEMGREP_SCAN_ON_CHANGE = true
SEMGREP_RESULT_RETENTION_DAYS = 30

# Redis Configuration
REDIS_ENABLED = true
REDIS_URL = redis://localhost:6379
REDIS_MAXMEMORY = 128mb
REDIS_USE_MULTI_LEVEL = true
REDIS_TTL_EMBEDDING = 86400
REDIS_TTL_SEARCH = 3600
REDIS_TTL_GRAPH = 1800
REDIS_TTL_PROGRESS = 300
REDIS_RETRY_ATTEMPTS = 3
REDIS_RETRY_DELAY = 1000
REDIS_POOL_MIN = 1
REDIS_POOL_MAX = 5

# Cache Configuration
CACHE_CLEANUP_INTERVAL = 600000

# Static Analysis Configuration
SEMGREP_ENABLED = true
SEMGREP_CLI_PATH = semgrep
SEMGREP_RULES_DIR = ./config/semgrep-rules
SEMGREP_ENHANCED_RULES_PATH = ./config/enhanced-rules
SEMGREP_TIMEOUT = 300
SEMGREP_MAX_TARGET_BYTES = 1000000
SEMGREP_MAX_CONCURRENT_SCANS = 5
SEMGREP_CACHE_ENABLED = true
SEMGREP_CACHE_TTL = 3600
SEMGREP_SCAN_ON_CHANGE = true

# Grafana Configuration
GRAFANA_ADMIN_PASSWORD=admin123
GRAFANA_PORT=3100
SEMGREP_RESULT_RETENTION_DAYS = 30

# Infrastructure Configuration
# Common Configuration
INFRA_COMMON_ENABLE_CACHE = true
INFRA_COMMON_ENABLE_MONITORING = true
INFRA_COMMON_ENABLE_BATCHING = true
INFRA_COMMON_LOG_LEVEL = info
INFRA_COMMON_ENABLE_HEALTH_CHECKS = true
INFRA_COMMON_HEALTH_CHECK_INTERVAL = 30000
INFRA_COMMON_GRACEFUL_SHUTDOWN_TIMEOUT = 10000

# Qdrant Configuration
# Qdrant Cache Configuration
INFRA_QDRANT_CACHE_DEFAULT_TTL = 300000
INFRA_QDRANT_CACHE_MAX_ENTRIES = 10000
INFRA_QDRANT_CACHE_CLEANUP_INTERVAL = 60000
INFRA_QDRANT_CACHE_ENABLE_STATS = true

# Qdrant Performance Configuration
INFRA_QDRANT_PERFORMANCE_MONITORING_INTERVAL = 300
INFRA_QDRANT_PERFORMANCE_METRICS_RETENTION_PERIOD = 86400000
INFRA_QDRANT_PERFORMANCE_ENABLE_DETAILED_LOGGING = true
INFRA_QDRANT_PERFORMANCE_QUERY_EXECUTION_TIME = 1000
INFRA_QDRANT_PERFORMANCE_MEMORY_USAGE = 80
INFRA_QDRANT_PERFORMANCE_RESPONSE_TIME = 500

# Qdrant Batch Configuration
INFRA_QDRANT_BATCH_MAX_CONCURRENT_OPERATIONS = 5
INFRA_QDRANT_BATCH_DEFAULT_BATCH_SIZE = 50
INFRA_QDRANT_BATCH_MAX_BATCH_SIZE = 500
INFRA_QDRANT_BATCH_MIN_BATCH_SIZE = 10
INFRA_QDRANT_BATCH_MEMORY_THRESHOLD = 0.80
INFRA_QDRANT_BATCH_PROCESSING_TIMEOUT = 300000
INFRA_QDRANT_BATCH_RETRY_ATTEMPTS = 3
INFRA_QDRANT_BATCH_RETRY_DELAY = 1000
INFRA_QDRANT_BATCH_ADAPTIVE_BATCHING_ENABLED = true
INFRA_QDRANT_BATCH_PERFORMANCE_THRESHOLD = 1000
INFRA_QDRANT_BATCH_ADJUSTMENT_FACTOR = 0.1

# Qdrant Connection Configuration
INFRA_QDRANT_CONNECTION_MAX_CONNECTIONS = 10
INFRA_QDRANT_CONNECTION_MIN_CONNECTIONS = 2
INFRA_QDRANT_CONNECTION_CONNECTION_TIMEOUT = 30000
INFRA_QDRANT_CONNECTION_IDLE_TIMEOUT = 300000
INFRA_QDRANT_CONNECTION_ACQUIRE_TIMEOUT = 10000
INFRA_QDRANT_CONNECTION_VALIDATION_INTERVAL = 6000
INFRA_QDRANT_CONNECTION_ENABLE_CONNECTION_POOLING = true

# Qdrant Vector Configuration
INFRA_QDRANT_VECTOR_DEFAULT_COLLECTION = default
INFRA_QDRANT_VECTOR_COLLECTION_VECTOR_SIZE = 1536
INFRA_QDRANT_VECTOR_COLLECTION_DISTANCE = Cosine
INFRA_QDRANT_VECTOR_COLLECTION_INDEXING_TYPE = hnsw
INFRA_QDRANT_VECTOR_SEARCH_LIMIT = 10
INFRA_QDRANT_VECTOR_SEARCH_THRESHOLD = 0.5
INFRA_QDRANT_VECTOR_SEARCH_EXACT_SEARCH = false

# Nebula Configuration
# Nebula Cache Configuration
INFRA_NEBULA_CACHE_DEFAULT_TTL = 30000
INFRA_NEBULA_CACHE_MAX_ENTRIES = 10000
INFRA_NEBULA_CACHE_CLEANUP_INTERVAL = 60000
INFRA_NEBULA_CACHE_ENABLE_STATS = true

# Nebula Performance Configuration
INFRA_NEBULA_PERFORMANCE_MONITORING_INTERVAL = 30000
INFRA_NEBULA_PERFORMANCE_METRICS_RETENTION_PERIOD = 8640000
INFRA_NEBULA_PERFORMANCE_ENABLE_DETAILED_LOGGING = true
INFRA_NEBULA_PERFORMANCE_QUERY_EXECUTION_TIME = 1000
INFRA_NEBULA_PERFORMANCE_MEMORY_USAGE = 80
INFRA_NEBULA_PERFORMANCE_RESPONSE_TIME = 500

# Nebula Batch Configuration
INFRA_NEBULA_BATCH_MAX_CONCURRENT_OPERATIONS = 5
INFRA_NEBULA_BATCH_DEFAULT_BATCH_SIZE = 50
INFRA_NEBULA_BATCH_MAX_BATCH_SIZE = 500
INFRA_NEBULA_BATCH_MIN_BATCH_SIZE = 10
INFRA_NEBULA_BATCH_MEMORY_THRESHOLD = 0.80
INFRA_NEBULA_BATCH_PROCESSING_TIMEOUT = 300000
INFRA_NEBULA_BATCH_RETRY_ATTEMPTS = 3
INFRA_NEBULA_BATCH_RETRY_DELAY = 1000
INFRA_NEBULA_BATCH_ADAPTIVE_BATCHING_ENABLED = true
INFRA_NEBULA_BATCH_PERFORMANCE_THRESHOLD = 1000
INFRA_NEBULA_BATCH_ADJUSTMENT_FACTOR = 0.1

# Nebula Connection Configuration
INFRA_NEBULA_CONNECTION_MAX_CONNECTIONS = 10
INFRA_NEBULA_CONNECTION_MIN_CONNECTIONS = 2
INFRA_NEBULA_CONNECTION_CONNECTION_TIMEOUT = 30000
INFRA_NEBULA_CONNECTION_IDLE_TIMEOUT = 300000
INFRA_NEBULA_CONNECTION_ACQUIRE_TIMEOUT = 10000
INFRA_NEBULA_CONNECTION_VALIDATION_INTERVAL = 60000
INFRA_NEBULA_CONNECTION_ENABLE_CONNECTION_POOLING = true

# Nebula Graph Configuration
INFRA_NEBULA_GRAPH_DEFAULT_SPACE = default
INFRA_NEBULA_GRAPH_SPACE_PARTITION_NUM = 10
INFRA_NEBULA_GRAPH_SPACE_REPLICA_FACTOR = 1
INFRA_NEBULA_GRAPH_SPACE_VID_TYPE = FIXED_STRING
INFRA_NEBULA_GRAPH_QUERY_TIMEOUT = 3000
INFRA_NEBULA_GRAPH_QUERY_RETRY_ATTEMPTS = 3
INFRA_NEBULA_GRAPH_SCHEMA_AUTO_CREATE_TAGS = false
INFRA_NEBULA_GRAPH_SCHEMA_AUTO_CREATE_EDGES = false

# Transaction Configuration
INFRA_TRANSACTION_TIMEOUT = 30000
INFRA_TRANSACTION_RETRY_ATTEMPTS = 3
INFRA_TRANSACTION_RETRY_DELAY = 1000
INFRA_TRANSACTION_ENABLE_TWO_PHASE_COMMIT = true
INFRA_TRANSACTION_MAX_CONCURRENT_TRANSACTIONS = 100
INFRA_TRANSACTION_DEADLOCK_DETECTION_TIMEOUT = 500


# Indexing Configuration
INDEXING_BATCH_SIZE = 50
INDEXING_MAX_CONCURRENCY = 3
INDEXING_ENABLE_PARALLEL = true
INDEXING_TIMEOUT_MS = 300000
INDEXING_RETRY_ATTEMPTS = 3
INDEXING_ENABLE_INCREMENTAL = true
INDEXING_STRATEGY = smart
INDEXING_ENABLE_AUTO_OPTIMIZATION = true
INDEXING_OPTIMIZATION_THRESHOLD = 1000

# Project Naming Configuration
# Qdrant Collection Naming
PROJECT_QDRANT_DEFAULT_COLLECTION = code-snippets
PROJECT_QDRANT_NAMING_PATTERN = {projectId}

# Nebula Space Naming
PROJECT_NEBULA_DEFAULT_SPACE = test_space
PROJECT_NEBULA_NAMING_PATTERN = {projectId}

# Universal File Processing Configuration (for tree-sitter)
# Error handling configuration
UNIVERSAL_MAX_ERRORS = 5
UNIVERSAL_ERROR_RESET_INTERVAL = 60000

# Tree-sitter Configuration
# Enable/disable optimized query system for better performance
USE_OPTIMIZED_QUERIES = true
# Tree-sitter cache size for query results
TREE_SITTER_CACHE_SIZE = 1000
# Tree-sitter query timeout in milliseconds
TREE_SITTER_TIMEOUT = 30000
# Tree-sitter supported languages (comma-separated)
TREE_SITTER_SUPPORTED_LANGUAGES = typescript,javascript,python,java,go,rust,cpp,c
# Enable/disable tree-sitter parsing
TREE_SITTER_ENABLED = true

# Memory limit configuration
UNIVERSAL_MEMORY_LIMIT_MB = 500
UNIVERSAL_MEMORY_CHECK_INTERVAL = 5000

# Chunking parameters configuration
UNIVERSAL_MAX_CHUNK_SIZE = 2000
UNIVERSAL_CHUNK_OVERLAP = 200
UNIVERSAL_MAX_LINES_PER_CHUNK = 50

# Backup file processing configuration
UNIVERSAL_BACKUP_PATTERNS = .bak,.backup,.old,.tmp

# Hot Reload Configuration
HOT_RELOAD_ENABLED = true
HOT_RELOAD_DEBOUNCE_INTERVAL = 500
HOT_RELOAD_MAX_FILE_SIZE = 10485760
HOT_RELOAD_MAX_CONCURRENT_PROJECTS = 5
HOT_RELOAD_ENABLE_DETAILED_LOGGING = false
HOT_RELOAD_ERROR_MAX_RETRIES = 3
HOT_RELOAD_ERROR_ALERT_THRESHOLD = 5
HOT_RELOAD_ERROR_AUTO_RECOVERY = true