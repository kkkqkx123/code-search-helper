{"cells":[{"code":"#include <mutex>\r\n#include <thread>\r\n#include <iostream>\r\n\r\nstd::mutex mutex1, mutex2;\r\n\r\nvoid thread1() {\r\n    mutex1.lock();\r\n    std::cout << \"Thread 1 acquired mutex1\" << std::endl;\r\n    // 模拟一些工作\r\n    mutex2.lock();\r\n    std::cout << \"Thread 1 acquired mutex2\" << std::endl;\r\n    \r\n    mutex2.unlock();\r\n    mutex1.unlock();\r\n}\r\n\r\nvoid thread2() {\r\n    mutex2.lock();\r\n    std::cout << \"Thread 2 acquired mutex2\" << std::endl;\r\n    // 模拟一些工作\r\n    mutex1.lock();\r\n    std::cout << \"Thread 2 acquired mutex1\" << std::endl;\r\n    \r\n    mutex1.unlock();\r\n    mutex2.unlock();\r\n}\r\n\r\nint main() {\r\n    std::thread t1(thread1);\r\n    std::thread t2(thread2);\r\n    \r\n    t1.join();\r\n    t2.join();\r\n    \r\n    return 0;\r\n}","language":"cpp","kind":"code"},{"code":"(call_expression\r\n  function: (field_expression\r\n    (identifier) @first.lock\r\n    (field_identifier) @lock.method)\r\n  arguments: (argument_list)\r\n  (#match? @lock.method \"lock\")) @concurrency.relationship.deadlock.pattern","language":"scm","kind":"code"}]}