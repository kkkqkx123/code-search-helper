{"cells":[{"code":"#include <coroutine>\r\n#include <iostream>\r\n\r\nstruct Awaiter {\r\n    bool await_ready() { return false; }\r\n    void await_suspend(std::coroutine_handle<>) {\r\n        std::cout << \"Coroutine suspended\" << std::endl;\r\n    }\r\n    void await_resume() {\r\n        std::cout << \"Coroutine resumed\" << std::endl;\r\n    }\r\n};\r\n\r\nstruct Task {\r\n    struct promise_type {\r\n        Task get_return_object() {\r\n            return Task{std::coroutine_handle<promise_type>::from_promise(*this)};\r\n        }\r\n        std::suspend_never initial_suspend() { return {}; }\r\n        std::suspend_never final_suspend() noexcept { return {}; }\r\n        void return_void() {}\r\n        void unhandled_exception() {}\r\n    };\r\n    \r\n    std::coroutine_handle<promise_type> h;\r\n    Task(std::coroutine_handle<promise_type> handle) : h(handle) {}\r\n    ~Task() { if (h) h.destroy(); }\r\n};\r\n\r\nTask coroutineWithAwait() {\r\n    std::cout << \"Before await\" << std::endl;\r\n    co_await Awaiter{};\r\n    std::cout << \"After await\" << std::endl;\r\n}\r\n\r\nint main() {\r\n    auto task = coroutineWithAwait();\r\n    return 0;\r\n}","language":"cpp","kind":"code"},{"code":"(await_expression\r\n (call_expression) @awaited.call) @concurrency.relationship.coroutine.await","language":"scm","kind":"code"}]}