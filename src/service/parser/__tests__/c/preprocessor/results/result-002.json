{
  "testId": "preprocessor-002",
  "request": {
    "language": "c",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\n#define MAX(a, b) ((a) > (b) ? (a) : (b))\n#define MIN(a, b) ((a) < (b) ? (a) : (b))\n#define SQUARE(x) ((x) * (x))\n#define ABS(x) ((x) < 0 ? -(x) : (x))\n#define SWAP(a, b) do { typeof(a) temp = a; a = b; b = temp; } while(0)\n\nint main() {\n    int x = 10, y = 20;\n    int max_val = MAX(x, y);\n    int min_val = MIN(x, y);\n    int square_val = SQUARE(x);\n    int abs_val = ABS(-15);\n    \n    printf(\"Max: %d, Min: %d\\n\", max_val, min_val);\n    printf(\"Square: %d, Abs: %d\\n\", square_val, abs_val);\n    \n    SWAP(x, y);\n    printf(\"After swap: x=%d, y=%d\\n\", x, y);\n    \n    return 0;\n}",
    "query": "[\n  (preproc_def\n    name: (identifier) @name.definition.macro)\n  (preproc_function_def\n    name: (identifier) @name.definition.macro)\n] @definition.macro"
  },
  "response": {
    "success": true,
    "data": [
      {
        "captureName": "definition.macro",
        "type": "preproc_function_def",
        "text": "#define MAX(a, b) ((a) > (b) ? (a) : (b))\n",
        "startPosition": {
          "row": 3,
          "column": 0
        },
        "endPosition": {
          "row": 4,
          "column": 0
        }
      },
      {
        "captureName": "name.definition.macro",
        "type": "identifier",
        "text": "MAX",
        "startPosition": {
          "row": 3,
          "column": 8
        },
        "endPosition": {
          "row": 3,
          "column": 11
        }
      },
      {
        "captureName": "definition.macro",
        "type": "preproc_function_def",
        "text": "#define MIN(a, b) ((a) < (b) ? (a) : (b))\n",
        "startPosition": {
          "row": 4,
          "column": 0
        },
        "endPosition": {
          "row": 5,
          "column": 0
        }
      },
      {
        "captureName": "name.definition.macro",
        "type": "identifier",
        "text": "MIN",
        "startPosition": {
          "row": 4,
          "column": 8
        },
        "endPosition": {
          "row": 4,
          "column": 11
        }
      },
      {
        "captureName": "definition.macro",
        "type": "preproc_function_def",
        "text": "#define SQUARE(x) ((x) * (x))\n",
        "startPosition": {
          "row": 5,
          "column": 0
        },
        "endPosition": {
          "row": 6,
          "column": 0
        }
      },
      {
        "captureName": "name.definition.macro",
        "type": "identifier",
        "text": "SQUARE",
        "startPosition": {
          "row": 5,
          "column": 8
        },
        "endPosition": {
          "row": 5,
          "column": 14
        }
      },
      {
        "captureName": "definition.macro",
        "type": "preproc_function_def",
        "text": "#define ABS(x) ((x) < 0 ? -(x) : (x))\n",
        "startPosition": {
          "row": 6,
          "column": 0
        },
        "endPosition": {
          "row": 7,
          "column": 0
        }
      },
      {
        "captureName": "name.definition.macro",
        "type": "identifier",
        "text": "ABS",
        "startPosition": {
          "row": 6,
          "column": 8
        },
        "endPosition": {
          "row": 6,
          "column": 11
        }
      },
      {
        "captureName": "definition.macro",
        "type": "preproc_function_def",
        "text": "#define SWAP(a, b) do { typeof(a) temp = a; a = b; b = temp; } while(0)\n",
        "startPosition": {
          "row": 7,
          "column": 0
        },
        "endPosition": {
          "row": 8,
          "column": 0
        }
      },
      {
        "captureName": "name.definition.macro",
        "type": "identifier",
        "text": "SWAP",
        "startPosition": {
          "row": 7,
          "column": 8
        },
        "endPosition": {
          "row": 7,
          "column": 12
        }
      }
    ],
    "errors": [],
    "timestamp": "2025-11-20T00:31:46.396Z"
  },
  "timestamp": "2025-11-20T00:31:46.397Z"
}