{
  "testId": "semantic-013",
  "request": {
    "language": "c",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\ntypedef struct {\n    int* data;\n    int size;\n} IntArray;\n\nIntArray create_array(int size) {\n    IntArray arr;\n    arr.size = size;\n    arr.data = (int*)malloc(sizeof(int) * size);  // 资源分配\n    return arr;\n}\n\nint main() {\n    IntArray my_array = create_array(10);\n    \n    if (my_array.data != NULL) {\n        for (int i = 0; i < my_array.size; i++) {\n            my_array.data[i] = i;\n        }\n        \n        printf(\"Array created with size %d\\n\", my_array.size);\n        free(my_array.data);\n    }\n    \n    return 0;\n}",
    "query": "(function_definition\n  declarator: (function_declarator\n    declarator: (identifier) @resource.constructor)\n  body: (compound_statement\n    (declaration\n      type: (type_identifier) @resource.type\n      declarator: (init_declarator\n        declarator: (identifier) @resource.variable\n        value: (call_expression\n          function: (identifier) @allocation.function))))) @semantic.relationship.resource.initialization"
  },
  "response": {
    "success": true,
    "data": [
      {
        "captureName": "semantic.relationship.resource.initialization",
        "type": "function_definition",
        "text": "int main() {\n    IntArray my_array = create_array(10);\n    \n    if (my_array.data != NULL) {\n        for (int i = 0; i < my_array.size; i++) {\n            my_array.data[i] = i;\n        }\n        \n        printf(\"Array created with size %d\\n\", my_array.size);\n        free(my_array.data);\n    }\n    \n    return 0;\n}",
        "startPosition": {
          "row": 15,
          "column": 0
        },
        "endPosition": {
          "row": 28,
          "column": 1
        }
      },
      {
        "captureName": "resource.constructor",
        "type": "identifier",
        "text": "main",
        "startPosition": {
          "row": 15,
          "column": 4
        },
        "endPosition": {
          "row": 15,
          "column": 8
        }
      },
      {
        "captureName": "resource.type",
        "type": "type_identifier",
        "text": "IntArray",
        "startPosition": {
          "row": 16,
          "column": 4
        },
        "endPosition": {
          "row": 16,
          "column": 12
        }
      },
      {
        "captureName": "resource.variable",
        "type": "identifier",
        "text": "my_array",
        "startPosition": {
          "row": 16,
          "column": 13
        },
        "endPosition": {
          "row": 16,
          "column": 21
        }
      },
      {
        "captureName": "allocation.function",
        "type": "identifier",
        "text": "create_array",
        "startPosition": {
          "row": 16,
          "column": 24
        },
        "endPosition": {
          "row": 16,
          "column": 36
        }
      }
    ],
    "errors": [],
    "timestamp": "2025-11-20T06:55:10.911Z"
  },
  "timestamp": "2025-11-20T06:55:10.912Z"
}