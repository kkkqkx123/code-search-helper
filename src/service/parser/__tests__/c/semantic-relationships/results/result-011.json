{
  "testId": "semantic-011",
  "request": {
    "language": "c",
    "code": "#include <stdio.h>\n#include <stdlib.h>\n\nint main() {\n    // malloc测试\n    int* ptr1 = (int*)malloc(sizeof(int) * 10);\n    \n    // calloc测试\n    int* ptr2 = (int*)calloc(5, sizeof(int));\n    \n    // realloc测试\n    int* ptr3 = (int*)realloc(ptr1, sizeof(int) * 20);\n    \n    // 使用分配的内存\n    if (ptr3 != NULL) {\n        for (int i = 0; i < 20; i++) {\n            ptr3[i] = i;\n        }\n    }\n    \n    // free测试\n    free(ptr2);\n    free(ptr3);\n    \n    return 0;\n}",
    "query": "(call_expression\n  function: (identifier) @memory.function\n  (#match? @memory.function \"^(malloc|calloc|realloc|free)$\")\n  arguments: (argument_list)) @semantic.relationship.memory.management"
  },
  "response": {
    "success": true,
    "data": [
      {
        "captureName": "semantic.relationship.memory.management",
        "type": "call_expression",
        "text": "malloc(sizeof(int) * 10)",
        "startPosition": {
          "row": 5,
          "column": 22
        },
        "endPosition": {
          "row": 5,
          "column": 46
        }
      },
      {
        "captureName": "memory.function",
        "type": "identifier",
        "text": "malloc",
        "startPosition": {
          "row": 5,
          "column": 22
        },
        "endPosition": {
          "row": 5,
          "column": 28
        }
      },
      {
        "captureName": "semantic.relationship.memory.management",
        "type": "call_expression",
        "text": "calloc(5, sizeof(int))",
        "startPosition": {
          "row": 8,
          "column": 22
        },
        "endPosition": {
          "row": 8,
          "column": 44
        }
      },
      {
        "captureName": "memory.function",
        "type": "identifier",
        "text": "calloc",
        "startPosition": {
          "row": 8,
          "column": 22
        },
        "endPosition": {
          "row": 8,
          "column": 28
        }
      },
      {
        "captureName": "semantic.relationship.memory.management",
        "type": "call_expression",
        "text": "realloc(ptr1, sizeof(int) * 20)",
        "startPosition": {
          "row": 11,
          "column": 22
        },
        "endPosition": {
          "row": 11,
          "column": 53
        }
      },
      {
        "captureName": "memory.function",
        "type": "identifier",
        "text": "realloc",
        "startPosition": {
          "row": 11,
          "column": 22
        },
        "endPosition": {
          "row": 11,
          "column": 29
        }
      },
      {
        "captureName": "semantic.relationship.memory.management",
        "type": "call_expression",
        "text": "free(ptr2)",
        "startPosition": {
          "row": 21,
          "column": 4
        },
        "endPosition": {
          "row": 21,
          "column": 14
        }
      },
      {
        "captureName": "memory.function",
        "type": "identifier",
        "text": "free",
        "startPosition": {
          "row": 21,
          "column": 4
        },
        "endPosition": {
          "row": 21,
          "column": 8
        }
      },
      {
        "captureName": "semantic.relationship.memory.management",
        "type": "call_expression",
        "text": "free(ptr3)",
        "startPosition": {
          "row": 22,
          "column": 4
        },
        "endPosition": {
          "row": 22,
          "column": 14
        }
      },
      {
        "captureName": "memory.function",
        "type": "identifier",
        "text": "free",
        "startPosition": {
          "row": 22,
          "column": 4
        },
        "endPosition": {
          "row": 22,
          "column": 8
        }
      }
    ],
    "errors": [],
    "timestamp": "2025-11-20T01:34:53.689Z"
  },
  "timestamp": "2025-11-20T01:34:53.690Z"
}