{"cells":[{"code":"#include <shared_mutex>\r\n#include <thread>\r\n#include <iostream>\r\n\r\nstd::shared_mutex rwMutex;\r\nint sharedData = 0;\r\n\r\nvoid reader() {\r\n    rwMutex.lock_shared();\r\n    std::cout << \"Reading data: \" << sharedData << std::endl;\r\n    rwMutex.unlock_shared();\r\n}\r\n\r\nvoid writer() {\r\n    rwMutex.lock();\r\n    sharedData++;\r\n    std::cout << \"Writing data: \" << sharedData << std::endl;\r\n    rwMutex.unlock();\r\n}\r\n\r\nint main() {\r\n    std::thread t1(reader);\r\n    std::thread t2(reader);\r\n    std::thread t3(writer);\r\n    \r\n    t1.join();\r\n    t2.join();\r\n    t3.join();\r\n    \r\n    return 0;\r\n}","language":"cpp","kind":"code"},{"code":"(call_expression\r\n  function: (field_expression\r\n    (identifier) @shared.mutex\r\n    (field_identifier) @shared.method))@concurrency.relationship.shared.mutex\r\n  (#match? @shared.method \"^(lock_shared|unlock_shared)$\") ","language":"scm","kind":"code"}]}