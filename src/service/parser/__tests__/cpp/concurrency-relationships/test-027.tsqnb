{"cells":[{"code":"\r\nvoid incrementCounter(Counter* counter) {\r\n    // 这是一个潜在的竞态条件\r\n    counter->value = counter->value + 1;\r\n}\r\n\r\nint main() {\r\n    Counter counter{0};\r\n    \r\n    std::thread t1(incrementCounter, &counter);\r\n    std::thread t2(incrementCounter, &counter);\r\n    \r\n    t1.join();\r\n    t2.join();\r\n    \r\n    std::cout << \"Final counter value: \" << counter.value << std::endl;\r\n    \r\n    return 0;\r\n}","language":"cpp","kind":"code"},{"code":"(assignment_expression\r\n  left: (field_expression\r\n    argument: (identifier) @shared.variable\r\n    field: (field_identifier) @shared.field)\r\n\r\n  right: (binary_expression\r\n    left: (field_expression\r\n      argument: (identifier) @shared.variable.read\r\n      field: (field_identifier) @shared.field.read)\r\n    right: (number_literal) @increment.value)\r\n\r\n  ; 谓词确保被读取的变量和被写入的变量是同一个\r\n  ; 1. 对象名必须相同 (e.g., \"counter\" == \"counter\")\r\n  (#eq? @shared.variable @shared.variable.read)\r\n  ; 2. 字段名必须相同 (e.g., \"value\" == \"value\")\r\n  (#eq? @shared.field @shared.field.read)\r\n) @concurrency.relationship.race.condition","language":"scm","kind":"code"}]}