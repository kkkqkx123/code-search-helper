{"cells":[{"code":"// 测试函数指针声明\r\nint (*operation_func)(int, int);\r\nvoid (*callback)(void);\r\nchar* (*string_processor)(const char*);\r\n\r\n// 普通函数声明用于对比\r\nint add(int a, int b);\r\nvoid print_message(const char* message);\r\n\r\n// 普通函数定义\r\nint add(int a, int b) {\r\n    return a + b;\r\n}","language":"cpp","kind":"code"},{"code":"; 错误处理返回模式\r\n(function_definition\r\n  declarator: (function_declarator\r\n    declarator: (identifier) @relationship.semantic.function.from)\r\n  body: (compound_statement\r\n    (_\r\n      (return_statement\r\n        (identifier) @relationship.semantic.error-return.to\r\n        (#match? @relationship.semantic.error-return.to \"^(ERROR|FAIL|INVALID|NULL)$\")\r\n      ) @relationship.semantic.error.return\r\n    )\r\n  )\r\n)\r\n\r\n; 错误检查模式\r\n(function_definition\r\n  declarator: (function_declarator\r\n    declarator: (identifier) @relationship.semantic.function.from)\r\n  body: (compound_statement\r\n    (_\r\n      (if_statement\r\n        condition: (binary_expression\r\n          left: (identifier) _\r\n          operator: [\"==\" \"!=\"]\r\n          right: (identifier) @relationship.semantic.error-check.to)\r\n      ) @relationship.semantic.error.checking\r\n    )\r\n  )\r\n)\r\n\r\n; 资源管理模式\r\n(function_definition\r\n  declarator: (function_declarator\r\n    declarator: (identifier) @relationship.semantic.function.from)\r\n  body: (compound_statement\r\n    (_\r\n      (declaration\r\n        declarator: (init_declarator\r\n          declarator: (identifier) @relationship.semantic.resource.to\r\n          value: (call_expression\r\n            function: (identifier) _))\r\n      ) @relationship.semantic.resource.initialization\r\n    )\r\n  )\r\n)\r\n\r\n; 回调函数赋值模式\r\n(function_definition\r\n  declarator: (function_declarator\r\n    declarator: (identifier) @relationship.semantic.function.from)\r\n  body: (compound_statement\r\n    (_\r\n      (declaration\r\n        declarator: (init_declarator\r\n          declarator: (identifier) _\r\n          value: (identifier) @relationship.semantic.callback.to)\r\n      ) @relationship.semantic.callback.assignment\r\n    )\r\n  )\r\n)\r\n\r\n; 回调函数初始化模式\r\n(function_definition\r\n  declarator: (function_declarator\r\n    declarator: (identifier) @relationship.semantic.function.from)\r\n  body: (compound_statement\r\n    (_\r\n      (init_declarator\r\n        declarator: (identifier) _\r\n        value: (identifier) @relationship.semantic.callback-init.to\r\n      ) @relationship.semantic.callback.assignment\r\n    )\r\n  )\r\n)\r\n\r\n; 回调函数类型定义模式\r\n(function_definition\r\n  declarator: (function_declarator\r\n    declarator: (identifier) @relationship.semantic.function.from)\r\n  body: (compound_statement\r\n    (_\r\n      (type_definition\r\n        (function_declarator\r\n          (parenthesized_declarator\r\n            (pointer_declarator\r\n              (type_identifier) @relationship.semantic.callback-type.to)))\r\n      ) @relationship.semantic.callback.type\r\n    )\r\n  )\r\n)","language":"scm","kind":"code"}]}