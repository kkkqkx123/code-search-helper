{"version":3,"file":"Client.js","names":["_lodash","_interopRequireDefault","require","_Connection","_NebulaError","_events","obj","__esModule","default","AsyncResource","executionAsyncId","isSupported","asyncHooks","prototype","runInAsyncScope","e","console","log","getNumberValue","actualValue","defaultValue","_","isInteger","Client","EventEmitter","constructor","option","clientOption","connections","taskQueue","connectionGuarders","poolSize","bufferSize","executeTimeout","pingInterval","forEach","servers","conf","i","host","port","isString","list","split","length","NebulaError","isPlainObject","connection","Connection","userName","password","space","on","sender","emit","task","shift","asyncResource","run","emitDestroy","error","_this$_events","retryInfo","connectionId","push","setInterval","ping","execute","command","returnOriginalData","Promise","resolve","reject","timeout","asyncResourceForExecute","asyncResourceForTimeout","executingTimer","setTimeout","err","freeConnections","filter","o","isReady","isBusy","seed","random","taskShouldReject","close","timer","clearInterval","all","map","exports","module"],"sources":["Client.ts"],"sourcesContent":[null],"mappings":"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"}